<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>EzTextRenderer (ez_text_renderer.EzTextRenderer)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ez_text_renderer</a> &#x00BB; EzTextRenderer</nav><h1>Module <code>EzTextRenderer</code></h1><p>EzTextRenderer library</p><p>This modules allows to perform text rendering of (UTF-8 encoded) Unicode strings to standard OCaml arrays. It is based on the FreeType library.</p><p>It is currently limited to horizontal left-to-right text layout.</p><p>Error handling is pretty basic: most errors will simply be raised as a Failure exception with an explanatory string. Failed memory allocations will raise Out_of_memory.</p><p>A typical usage is as follows:</p><pre><code class="ml">open EzTextRenderer

let black = { blue = 0x00; green = 0x00; red = 0x00; alpha = 0xFF }
let grey = { blue = 0x80; green = 0x80; red = 0x80; alpha = 0xFF }
let white = { blue = 0xFF; green = 0xFF; red = 0xFF; alpha = 0xFF }

let () =
  init ();

  let txt_height = 64 in

  set_font &quot;/usr/share/fonts/truetype/freefont/FreeSerif.ttf&quot; txt_height;

  let text = &quot;Hello World !&quot; in

  let txt_width = compute_text_width text in

  let img_size = { width = txt_width + 16; height = txt_height + 16 } in

  let image = Array.make (img_size.height * img_size.width) grey in

  render_text text black white
    { x = 8; y = 8; width = txt_width; height = txt_height }
    image img_size;

  dump_image image img_size &quot;img.ppm&quot;;

  release ()</code></pre></header><dl><dt class="spec type" id="type-color"><a href="#type-color" class="anchor"></a><code><span class="keyword">type</span> color</code><code> = </code><code>{</code><table class="record"><tr id="type-color.blue" class="anchored"><td class="def field"><a href="#type-color.blue" class="anchor"></a><code>blue : int;</code></td></tr><tr id="type-color.green" class="anchored"><td class="def field"><a href="#type-color.green" class="anchor"></a><code>green : int;</code></td></tr><tr id="type-color.red" class="anchored"><td class="def field"><a href="#type-color.red" class="anchor"></a><code>red : int;</code></td></tr><tr id="type-color.alpha" class="anchored"><td class="def field"><a href="#type-color.alpha" class="anchor"></a><code>alpha : int;</code></td></tr></table><code>}</code></dt><dd><p>Representation of a color, where each component must be between 0 and 255</p></dd></dl><dl><dt class="spec type" id="type-position"><a href="#type-position" class="anchor"></a><code><span class="keyword">type</span> position</code><code> = </code><code>{</code><table class="record"><tr id="type-position.x" class="anchored"><td class="def field"><a href="#type-position.x" class="anchor"></a><code>x : int;</code></td></tr><tr id="type-position.y" class="anchored"><td class="def field"><a href="#type-position.y" class="anchor"></a><code>y : int;</code></td></tr></table><code>}</code></dt><dd><p>A position in an image, with (x,y) located at the top-left</p></dd></dl><dl><dt class="spec type" id="type-dimension"><a href="#type-dimension" class="anchor"></a><code><span class="keyword">type</span> dimension</code><code> = </code><code>{</code><table class="record"><tr id="type-dimension.width" class="anchored"><td class="def field"><a href="#type-dimension.width" class="anchor"></a><code>width : int;</code></td></tr><tr id="type-dimension.height" class="anchored"><td class="def field"><a href="#type-dimension.height" class="anchor"></a><code>height : int;</code></td></tr></table><code>}</code></dt><dd><p>An image's dimensions</p></dd></dl><dl><dt class="spec type" id="type-area"><a href="#type-area" class="anchor"></a><code><span class="keyword">type</span> area</code><code> = </code><code>{</code><table class="record"><tr id="type-area.x" class="anchored"><td class="def field"><a href="#type-area.x" class="anchor"></a><code>x : int;</code></td></tr><tr id="type-area.y" class="anchored"><td class="def field"><a href="#type-area.y" class="anchor"></a><code>y : int;</code></td></tr><tr id="type-area.width" class="anchored"><td class="def field"><a href="#type-area.width" class="anchor"></a><code>width : int;</code></td></tr><tr id="type-area.height" class="anchored"><td class="def field"><a href="#type-area.height" class="anchor"></a><code>height : int;</code></td></tr></table><code>}</code></dt><dd><p>An area of an image, starting at (x,y) and of size (width,height)</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Initialize the EzTextRenderer library. Must be called at least once before calling any other function in this module.</p></dd></dl><dl><dt class="spec value" id="val-release"><a href="#val-release" class="anchor"></a><code><span class="keyword">val</span> release : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Free the EzTextRenderer library. Call it once you're done using the library.</p></dd></dl><dl><dt class="spec value" id="val-set_font"><a href="#val-set_font" class="anchor"></a><code><span class="keyword">val</span> set_font : string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Set the current font, where the first argument is a path to a font file (eg. /usr/share/fonts/truetype/freefont/FreeSerif.ttf) and the second is the font height in pixels.</p></dd></dl><dl><dt class="spec value" id="val-compute_text_width"><a href="#val-compute_text_width" class="anchor"></a><code><span class="keyword">val</span> compute_text_width : string <span>&#45;&gt;</span> int</code></dt><dd><p>Return the width of the specified text in pixels, for the currently selected font. Fails if no font has been selected.</p></dd></dl><dl><dt class="spec value" id="val-render_text"><a href="#val-render_text" class="anchor"></a><code><span class="keyword">val</span> render_text : string <span>&#45;&gt;</span> <a href="index.html#type-color">color</a> <span>&#45;&gt;</span> <a href="index.html#type-color">color</a> <span>&#45;&gt;</span> <a href="index.html#type-area">area</a> <span>&#45;&gt;</span> <span><a href="index.html#type-color">color</a> array</span> <span>&#45;&gt;</span> <a href="index.html#type-dimension">dimension</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Render the specified text using the first color as front color and the second as background color in the given area of the provided array, representing an image whose dimensions are given as the last argument. Fails if no font has been selected.</p></dd></dl><dl><dt class="spec value" id="val-dump_image"><a href="#val-dump_image" class="anchor"></a><code><span class="keyword">val</span> dump_image : <span><a href="index.html#type-color">color</a> array</span> <span>&#45;&gt;</span> <a href="index.html#type-dimension">dimension</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Dump the provided array, representing an image whose dimensions are given by the second argument, in a PPM file whose name is given as the last argument.</p></dd></dl></div></body></html>